# 索引

## 创建索引

创建索引是指在某个表的一列或多列上建立一个索引，可以提高对表的访问速度。创建索引对 MySQL 数据库的高效运行来说是很重要的。   



**基本语法：**

MySQL 提供了三种创建索引的方法：

- 使用 CREATE INDEX 语句
- 使用 CREATE TABLE 语句
- 使用 ALTER TABLE 语句



### CREATE INDEX 语句

```mysql
CREATE INDEX indexName ON table_name (column_name)
-- 如果是CHAR，VARCHAR类型，length可以小于字段实际长度；如果是BLOB和TEXT类型，必须指定 length。

-- 详解如下：
CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name
    [index_type]
    ON tbl_name (key_part,...)
    [index_option]
    [algorithm_option | lock_option] ...

key_part: {col_name [(length)] | (expr)} [ASC | DESC]
index_option: {
    KEY_BLOCK_SIZE [=] value
  | index_type
  | WITH PARSER parser_name
  | COMMENT 'string'
  | {VISIBLE | INVISIBLE}
  | ENGINE_ATTRIBUTE [=] 'string'
  | SECONDARY_ENGINE_ATTRIBUTE [=] 'string'
}
index_type:
    USING {BTREE | HASH}
algorithm_option:
    ALGORITHM [=] {DEFAULT | INPLACE | COPY}
lock_option:
    LOCK [=] {DEFAULT | NONE | SHARED | EXCLUSIVE}

```



### CREATE TABLE 语句

**创建表的时候直接指定**

```mysql
CREATE TABLE mytable(  
ID INT NOT NULL,
username VARCHAR(16) NOT NULL,
INDEX [indexName] (username(length))
);  


-- 在 CREATE TABLE 语句中添加此语句，表示在创建新表的同时创建该表的主键。
CONSTRAINT PRIMARY KEY [索引类型] (<列名>,…)

-- 在 CREATE TABLE 语句中添加此语句，表示在创建新表的同时创建该表的索引。
KEY | INDEX [<索引名>] [<索引类型>] (<列名>,…)

-- 在 CREATE TABLE 语句中添加此语句，表示在创建新表的同时创建该表的唯一性索引。
UNIQUE [ INDEX | KEY] [<索引名>] [<索引类型>] (<列名>,…)

-- 在 CREATE TABLE 语句中添加此语句，表示在创建新表的同时创建该表的外键。
FOREIGN KEY <索引名> <列名>
```



### ALTER TABLE 语句

**使用ALTER 命令添加和删除索引**

```mysql
ALTER TABLE testalter_tbl ADD INDEX (c);	-- 添加索引，索引名默认为列名。
ALTER TABLE testalter_tbl DROP INDEX c;		-- 删除索引
-- 在 ALTER TABLE 语句中添加此语法成分，表示在修改表的同时为该表添加索引。
ADD INDEX [<索引名>] [<索引类型>] (<列名>,…)

ALTER TABLE testalter_tbl MODIFY i INT NOT NULL;
ALTER TABLE testalter_tbl ADD PRIMARY KEY (i);
ALTER TABLE testalter_tbl DROP PRIMARY KEY;
-- 在 ALTER TABLE 语句中添加此语法成分，表示在修改表的同时为该表添加主键。
ADD PRIMARY KEY [<索引类型>] (<列名>,…)

-- 在 ALTER TABLE 语句中添加此语法成分，表示在修改表的同时为该表添加唯一性索引。
ADD UNIQUE [ INDEX | KEY] [<索引名>] [<索引类型>] (<列名>,…)

-- 在 ALTER TABLE 语句中添加此语法成分，表示在修改表的同时为该表添加外键。
ADD FOREIGN KEY [<索引名>] (<列名>,…)
```



## 删除索引

```mysql
DROP INDEX [indexName] ON mytable; 
alter table mytable drop index [indexname];
```



## 查看索引

索引创建完成后，可以利用 SQL 语句查看已经存在的索引。

```mysql
SHOW INDEX FROM student FROM school;
SHOW INDEX FROM student FROM ;

SHOW INDEX FROM <表名> [ FROM <数据库名>];
```



## 修改索引

所谓修改，就是删掉重建。

```mysql
DROP INDEX stu_id ON `student`; 
ALTER TABLE `student` ADD UNIQUE id_stu ( `id` );
```